<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Polyglot Master | æ³°éŸ“èªå¤§å¸«</title>
    <style>
        :root {
            --bg-main: #121212;
            --bg-panel: #1e1e1e;
            --bg-modal: #252525;
            --text-main: #e0e0e0;
            --text-mute: #9e9e9e;
            --accent: #00e5ff;
            --c-th: #ba68c8; 
            --c-kr: #64b5f6;
            --c-vocab: #69f0ae;
            --border: #333;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-main);
            color: var(--text-main);
            margin: 0;
            height: 100vh;
            height: 100dvh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            /* ç¦æ­¢é¸å–æ–‡å­—ï¼Œè®“ App æ›´æœ‰è³ªæ„Ÿ */
            -webkit-user-select: none;
            user-select: none;
        }

        header {
            padding-top: max(15px, env(safe-area-inset-top)); 
            padding-bottom: 15px;
            padding-left: 20px;
            padding-right: 20px;
            background: var(--bg-panel);
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
            z-index: 10;
        }
        h1 { margin: 0; font-size: 1.1rem; color: var(--accent); letter-spacing: 1px; }
        
        .tabs { display: flex; gap: 10px; }
        .tab-btn {
            padding: 6px 15px;
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text-mute);
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: 0.3s;
            white-space: nowrap;
        }
        .tab-btn.active { background: #333; color: white; border-color: #666; }

        .container {
            flex: 1;
            padding: 20px;
            padding-bottom: calc(40px + env(safe-area-inset-bottom)); 
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            display: none;
        }
        .container.active { display: block; }

        .intro-box {
            background: rgba(255,255,255,0.05);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid var(--text-mute);
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .grid-section-title {
            margin: 30px 0 15px 0;
            padding-bottom: 5px;
            border-bottom: 1px solid #333;
            color: var(--text-main);
            font-size: 1.2rem;
            font-weight: bold;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(75px, 1fr));
            gap: 10px;
        }
        .card {
            background: var(--bg-panel);
            border: 1px solid var(--border);
            border-radius: 12px;
            height: 85px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: transform 0.2s;
            position: relative;
            -webkit-tap-highlight-color: transparent; 
        }
        .card:active { transform: scale(0.96); background: #333; }
        
        .card-char { font-size: 1.8rem; margin-bottom: 2px; font-weight: bold; }
        .card-rom { font-size: 0.7rem; color: var(--text-mute); text-transform: uppercase; }
        
        /* é¡è‰²åˆ†é¡ */
        .th-mid .card-char { color: #4caf50; }
        .th-high .card-char { color: #ff9800; }
        .th-low .card-char { color: #2196f3; }
        .th-vowel .card-char { color: #e91e63; }
        
        .kr-base .card-char { color: #90caf9; }
        .kr-asp .card-char { color: #ce93d8; }
        .kr-tense .card-char { color: #ef9a9a; }
        .kr-vowel .card-char { color: #fff59d; }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.85);
            z-index: 1000;
            display: none;
            justify-content: center;
            align-items: flex-end;
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
        }
        @media (min-width: 600px) { .modal-overlay { align-items: center; } }

        .modal-content {
            background: var(--bg-modal);
            width: 100%;
            max-width: 550px;
            max-height: 85vh;
            border-radius: 20px 20px 0 0;
            border: 1px solid var(--border);
            padding: 25px;
            position: relative;
            box-shadow: 0 -10px 30px rgba(0,0,0,0.5);
            overflow-y: auto;
            padding-bottom: calc(30px + env(safe-area-inset-bottom));
        }
        @media (min-width: 600px) {
            .modal-content { width: 90%; border-radius: 16px; padding-bottom: 25px; }
        }

        .close-btn {
            position: absolute;
            top: 15px; right: 20px;
            font-size: 2rem; cursor: pointer; color: var(--text-mute);
            z-index: 10;
            padding: 10px; /* å¢åŠ é»æ“Šå€åŸŸ */
        }

        .m-header { display: flex; align-items: center; margin-bottom: 20px; border-bottom: 1px solid var(--border); padding-bottom: 15px; }
        .m-big-char { font-size: 3.5rem; margin-right: 20px; font-weight: bold; }
        .m-title { font-size: 1.3rem; margin: 0; }
        .m-subtitle { color: var(--text-mute); margin: 5px 0 0 0; font-size: 0.9rem; }

        .section-label {
            font-size: 0.8rem;
            color: var(--accent);
            text-transform: uppercase;
            letter-spacing: 1.5px;
            margin-bottom: 8px;
            margin-top: 20px;
            display: block;
            font-weight: bold;
            border-left: 3px solid var(--accent);
            padding-left: 8px;
        }

        .memory-box {
            background: rgba(255, 255, 0, 0.05);
            border: 1px dashed #666;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 15px;
            color: #fff9c4;
            font-size: 0.95rem;
            line-height: 1.4;
        }

        .combo-row {
            display: flex;
            align-items: center;
            background: rgba(255,255,255,0.05);
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 8px;
            font-family: monospace;
            font-size: 1.1rem;
        }
        .combo-part { color: var(--text-mute); margin: 0 8px; }
        .combo-result { color: var(--accent); font-weight: bold; margin-left: auto; font-size: 1.3rem; }
        .combo-desc { font-size: 0.8rem; color: #888; margin-left: 8px; font-family: sans-serif;}

        .vocab-list { display: grid; grid-template-columns: 1fr; gap: 10px; }
        @media (min-width: 500px) { .vocab-list { grid-template-columns: 1fr 1fr; } }

        .vocab-item {
            background: var(--bg-panel);
            border: 1px solid #333;
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.2s;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .vocab-item:active { background: #333; transform: scale(0.98); }
        .v-word { font-size: 1.1rem; font-weight: bold; margin-bottom: 3px; color: var(--text-main); }
        .v-mean { font-size: 0.8rem; color: var(--text-mute); }

    </style>
</head>
<body>

    <header>
        <h1>Polyglot Master</h1>
        <div class="tabs">
            <button class="tab-btn active" onclick="setLang('th')">ğŸ‡¹ğŸ‡­ æ³°èª</button>
            <button class="tab-btn" onclick="setLang('kr')">ğŸ‡°ğŸ‡· éŸ“èª</button>
        </div>
    </header>

    <div id="th-area" class="container active">
        <div class="intro-box">
            <strong>æ³°èªåˆ†é¡æç¤ºï¼š</strong> <br>
            <span style="color:#4caf50">â— ä¸­å­éŸ³</span> / 
            <span style="color:#ff9800">â— é«˜å­éŸ³</span> / 
            <span style="color:#2196f3">â— ä½å­éŸ³</span> / 
            <span style="color:#e91e63">â— æ¯éŸ³</span>
        </div>
        
        <div class="grid-section-title">ä¸­å­éŸ³ (Mid Class)</div>
        <div class="grid" id="th-mid-grid"></div>
        
        <div class="grid-section-title">é«˜å­éŸ³ (High Class)</div>
        <div class="grid" id="th-high-grid"></div>
        
        <div class="grid-section-title">ä½å­éŸ³ (Low Class)</div>
        <div class="grid" id="th-low-grid"></div>

        <div class="grid-section-title">æ¯éŸ³ (Vowels)</div>
        <div class="grid" id="th-vowel-grid"></div>
    </div>

    <div id="kr-area" class="container">
        <div class="intro-box">
            <strong>éŸ“èªåˆ†é¡æç¤ºï¼š</strong> <br>
            <span style="color:#90caf9">â— å¹³éŸ³</span> / 
            <span style="color:#ce93d8">â— æ¿€éŸ³</span> / 
            <span style="color:#ef9a9a">â— ç·ŠéŸ³</span> / 
            <span style="color:#fff59d">â— æ¯éŸ³</span>
        </div>

        <div class="grid-section-title">å­éŸ³ (Consonants)</div>
        <div class="grid" id="kr-cons-grid"></div>

        <div class="grid-section-title">æ¯éŸ³ (Vowels)</div>
        <div class="grid" id="kr-vowel-grid"></div>
    </div>

    <div class="modal-overlay" id="modal" onclick="closeModal(event)">
        <div class="modal-content" onclick="event.stopPropagation()">
            <span class="close-btn" onclick="closeModal()">Ã—</span>

            <div class="m-header">
                <div class="m-big-char" id="m-char"></div>
                <div>
                    <h2 class="m-title" id="m-name"></h2>
                    <p class="m-subtitle" id="m-type"></p>
                </div>
            </div>

            <span class="section-label">ğŸ§  è¨˜æ†¶æŠ€å·§</span>
            <div class="memory-box" id="m-memo"></div>

            <span class="section-label" id="label-combo">ğŸ—ï¸ çµ„åˆé‚è¼¯</span>
            <div id="m-combo-list"></div>

            <span class="section-label">ğŸ’¬ é»æ“Šè½å–®å­—</span>
            <div class="vocab-list" id="m-vocab-list"></div>
        </div>
    </div>

    <script>
        // === å®Œæ•´è³‡æ–™åº« ===
        const DB = {
            th: {
                mid: [
                    { char: "à¸", rom: "k/g", name: "Ko Kai (é›)", memo: "é›å˜´å–™å‘å·¦ã€‚ä¸­å­éŸ³ç™¼éŸ³å¹³ã€‚", combos: [{v:"-à¸²", ex:"à¸ + à¸²", res:"à¸à¸²", desc:"çƒé´‰"}, {v:"-à¸µ", ex:"à¸ + -à¸µ", res:"à¸à¸µ", desc:"Gii"}], vocab: [{w:"à¹„à¸à¹ˆ", m:"é›"}, {w:"à¸à¸´à¸™", m:"åƒ"}] },
                    { char: "à¸ˆ", rom: "j", name: "Jo Jan (ç›¤å­)", memo: "åƒç›¤å­ã€‚ç™¼éŸ³åƒ Jã€‚", combos: [{v:"-à¸²", ex:"à¸ˆ + à¸²", res:"à¸ˆà¸²", desc:"Jaa"}], vocab: [{w:"à¸ˆà¸£à¸´à¸‡", m:"çœŸçš„"}, {w:"à¹ƒà¸ˆ", m:"å¿ƒ"}] },
                    { char: "à¸”", rom: "d", name: "Do Dek (å°å­©)", memo: "å°å­©èœ·ç¸®åœ¨è£¡é¢ã€‚", vocab: [{w:"à¸”à¸¹", m:"çœ‹"}, {w:"à¸”à¸µ", m:"å¥½"}] },
                    { char: "à¸•", rom: "t", name: "To Tao (çƒé¾œ)", memo: "é ­ä¸Šæœ‰å‡¹ç—•(é¾œæ®¼)ã€‚", vocab: [{w:"à¸•à¸²", m:"çœ¼ç›"}, {w:"à¹‚à¸•", m:"å¤§"}] },
                    { char: "à¸š", rom: "b", name: "Bo Baimai (è‘‰å­)", memo: "åƒè‘‰å­å½¢ç‹€ã€‚", vocab: [{w:"à¸šà¹‰à¸²à¸™", m:"å®¶"}, {w:"à¸šà¸´à¸™", m:"é£›"}] },
                    { char: "à¸›", rom: "p", name: "Po Pla (é­š)", memo: "é­šå°¾å·´é•·é•·çš„ã€‚", vocab: [{w:"à¹„à¸›", m:"å»"}, {w:"à¸›à¸µ", m:"å¹´"}] },
                    { char: "à¸­", rom: "-", name: "O Ang (æ°´ç›†)", memo: "é›¶è²æ¯ï¼Œæˆ–æ˜¯ç•¶æ¯éŸ³ç”¨ã€‚", vocab: [{w:"à¸­à¸­à¸", m:"å‡º"}, {w:"à¸­à¹ˆà¸²à¸™", m:"è®€"}] }
                ],
                high: [
                    { char: "à¸‚", rom: "kh", name: "Kho Khai (è›‹)", memo: "è›‹ç ´æ®¼æ²èµ·ä¾†ã€‚é«˜å­éŸ³(ä¸Šæš)ã€‚", combos: [{v:"-à¸²", ex:"à¸‚ + à¸²", res:"à¸‚à¸²", desc:"è…¿ (ä¸Šè²)"}], vocab: [{w:"à¹€à¸‚à¸²", m:"ä»–/å±±"}, {w:"à¸‚à¸²à¸¢", m:"è³£"}] },
                    { char: "à¸‰", rom: "ch", name: "Cho Ching (éˆ¸)", memo: "åƒæ¨‚å™¨éˆ¸ã€‚", vocab: [{w:"à¸‰à¸±à¸™", m:"æˆ‘"}, {w:"à¸‰à¸µà¸", m:"æ’•"}] },
                    { char: "à¸–", rom: "th", name: "Tho Thung (è¢‹å­)", memo: "è¢‹å£æŸèµ·ä¾†ã€‚", vocab: [{w:"à¸–à¸¸à¸‡", m:"è¢‹å­"}, {w:"à¸–à¸¹à¸", m:"ä¾¿å®œ"}] },
                    { char: "à¸œ", rom: "ph", name: "Pho Phueng (èœœèœ‚)", memo: "ä¸­é–“å°–å°–åƒèœœèœ‚åˆºã€‚", vocab: [{w:"à¸œà¸µ", m:"é¬¼"}, {w:"à¸œà¹‰à¸²", m:"å¸ƒ"}] },
                    { char: "à¸", rom: "f", name: "Fo Fa (è“‹å­)", memo: "åƒèœœèœ‚ä½†å°¾å·´é•·ã€‚", vocab: [{w:"à¸à¸™", m:"é›¨"}, {w:"à¸à¸±à¸™", m:"å¤¢"}] },
                    { char: "à¸ª", rom: "s", name: "So Sua (è€è™)", memo: "è€è™å°¾å·´ç¿¹èµ·ä¾†ã€‚", vocab: [{w:"à¸ªà¸§à¸¢", m:"æ¼‚äº®"}, {w:"à¸ªà¸µ", m:"é¡è‰²"}] },
                    { char: "à¸«", rom: "h", name: "Ho Hip (ç®±å­)", memo: "åƒæœ‰è“‹å­çš„ç®±å­ã€‚", vocab: [{w:"à¸«à¸¡à¸²", m:"ç‹—"}, {w:"à¸«à¸¹", m:"è€³æœµ"}] }
                ],
                low: [
                    { char: "à¸„", rom: "kh", name: "Kho Khwai (æ°´ç‰›)", memo: "æ°´ç‰›è§’å¼µé–‹ã€‚ä½å­éŸ³(å¹³)ã€‚", combos: [{v:"-à¸²", ex:"à¸„ + à¸²", res:"à¸„à¸²", desc:"Khaa"}], vocab: [{w:"à¸„à¸™", m:"äºº"}, {w:"à¸„à¸´à¸”", m:"æƒ³"}] },
                    { char: "à¸‡", rom: "ng", name: "Ngo Ngu (è›‡)", memo: "åƒè›‡çš„å°¾å·´ã€‚", vocab: [{w:"à¸‡à¸¹", m:"è›‡"}, {w:"à¸‡à¸²à¸™", m:"å·¥ä½œ"}] },
                    { char: "à¸Š", rom: "ch", name: "Cho Chang (è±¡)", memo: "å¤§è±¡å°¾å·´ç¿¹èµ·ä¾†ã€‚", vocab: [{w:"à¸Šà¹‰à¸²", m:"æ…¢"}, {w:"à¸Šà¸­à¸š", m:"å–œæ­¡"}] },
                    { char: "à¸‹", rom: "s", name: "So So (éˆå­)", memo: "åƒéˆå­æ–·é–‹ã€‚", vocab: [{w:"à¸‹à¸·à¹‰à¸­", m:"è²·"}, {w:"à¸‹à¹‰à¸²à¸¢", m:"å·¦"}] },
                    { char: "à¸—", rom: "th", name: "Tho Thahan (è»äºº)", memo: "è»äººç«™ç›´ç›´ã€‚", vocab: [{w:"à¸—à¸³", m:"åš"}, {w:"à¸—à¸µà¹ˆ", m:"åœ¨"}] },
                    { char: "à¸™", rom: "n", name: "No Nu (è€é¼ )", memo: "è€é¼ å°¾å·´æ²æ²ã€‚", vocab: [{w:"à¸™à¸²à¸™", m:"ä¹…"}, {w:"à¸™à¹‰à¸³", m:"æ°´"}] },
                    { char: "à¸", rom: "ph", name: "Pho Phan (ç›¤)", memo: "ç›¤å­å¤–æ“´ï¼Œä¸­é–“å°–å°–ã€‚", vocab: [{w:"à¸à¹ˆà¸­", m:"çˆ¸çˆ¸"}, {w:"à¸à¸¹à¸”", m:"èªª"}] },
                    { char: "à¸Ÿ", rom: "f", name: "Fo Fan (ç‰™é½’)", memo: "åƒç›¤å­ä½†å°¾å·´é•·ã€‚", vocab: [{w:"à¹„à¸Ÿ", m:"ç«"}, {w:"à¸Ÿà¸±à¸‡", m:"è½"}] },
                    { char: "à¸¡", rom: "m", name: "Mo Ma (é¦¬)", memo: "åƒé¦¬ä½é ­ã€‚", combos: [{v:"-à¸²", ex:"à¸¡ + à¸²", res:"à¸¡à¸²", desc:"ä¾†"}, {v:"-à¸µ", ex:"à¸¡ + -à¸µ", res:"à¸¡à¸µ", desc:"æœ‰"}], vocab: [{w:"à¸¡à¸²", m:"ä¾†"}, {w:"à¹„à¸¡à¹ˆ", m:"ä¸"}] },
                    { char: "à¸¢", rom: "y", name: "Yo Yak (å·¨äºº)", memo: "å·¨äººçš„ç ç‰™ã€‚", vocab: [{w:"à¸¢à¸²", m:"è—¥"}, {w:"à¸¢à¸²à¸", m:"é›£"}] },
                    { char: "à¸£", rom: "r", name: "Ro Rua (èˆ¹)", memo: "èˆ¹çš„å½¢ç‹€ã€‚", vocab: [{w:"à¸£à¸–", m:"è»Š"}, {w:"à¸£à¸±à¸", m:"æ„›"}] },
                    { char: "à¸¥", rom: "l", name: "Lo Ling (çŒ´)", memo: "çŒ´å­å°¾å·´ã€‚", vocab: [{w:"à¸¥à¸”", m:"æ¸›åƒ¹"}, {w:"à¸¥à¸¹à¸", m:"å­©å­"}] },
                    { char: "à¸§", rom: "w", name: "Wo Waen (æˆ’æŒ‡)", memo: "æˆ’æŒ‡çš„åœ“åœˆã€‚", vocab: [{w:"à¸§à¸±à¸™", m:"æ—¥"}, {w:"à¸§à¸´à¹ˆà¸‡", m:"è·‘"}] },
                    { char: "à¸®", rom: "h", name: "Ho Nok-huk (è²“é ­é·¹)", memo: "å¤§çœ¼ç›çš„è²“é ­é·¹ã€‚", vocab: [{w:"à¸®à¸±à¸¥à¹‚à¸«à¸¥", m:"Hello"}, {w:"à¸®à¸²", m:"å“ˆ(ç¬‘è²)"}] }
                ],
                vowels: [
                    { char: "-à¸°", rom: "a", name: "Sara A (çŸ­)", memo: "çŸ­ä¿ƒçš„é˜¿ã€‚", vocab: [{w:"à¸ˆà¸°", m:"å°‡è¦"}, {w:"à¸à¸°", m:"ä¼°è¨ˆ"}] },
                    { char: "-à¸²", rom: "aa", name: "Sara Aa (é•·)", memo: "åƒä¸€æ ¹æ‹æ–ï¼Œæ”¾åœ¨å³é‚Šã€‚", combos: [{v:"à¸•", ex:"à¸• + à¸²", res:"à¸•à¸²", desc:"Taa"}, {v:"à¸¡", ex:"à¸¡ + à¸²", res:"à¸¡à¸²", desc:"Maa"}], vocab: [{w:"à¸¡à¸²", m:"ä¾†"}, {w:"à¸‚à¸²", m:"è…¿"}] },
                    { char: "-à¸´", rom: "i", name: "Sara I (çŸ­)", memo: "ä¸Šé¢çš„å¸½å­ï¼Œæ²’æœ‰å°¾å·´ã€‚", vocab: [{w:"à¸à¸´à¸™", m:"åƒ"}, {w:"à¸šà¸´à¸™", m:"é£›"}] },
                    { char: "-à¸µ", rom: "ii", name: "Sara Ii (é•·)", memo: "å¸½å­é•·å‡ºä¸€æ¢å°¾å·´ã€‚", vocab: [{w:"à¸”à¸µ", m:"å¥½"}, {w:"à¸¡à¸µ", m:"æœ‰"}] },
                    { char: "-à¸¶", rom: "ue", name: "Sara Ue (çŸ­)", memo: "ä¸Šé¢æœ‰å€‹åœ“åœˆã€‚", vocab: [{w:"à¸–à¸¶à¸‡", m:"åˆ°é”"}, {w:"à¸‚à¸¶à¹‰à¸™", m:"ä¸Šå‡"}] },
                    { char: "-à¸·", rom: "uue", name: "Sara Uue (é•·)", memo: "ä¸Šé¢æœ‰å…©æ¢ç›´ç·šã€‚", vocab: [{w:"à¸¡à¸·à¸­", m:"æ‰‹"}, {w:"à¸–à¸·à¸­", m:"æ‹¿"}] },
                    { char: "-à¸¸", rom: "u", name: "Sara U (çŸ­)", memo: "ä¸‹é¢çš„å°èŒèšªã€‚", vocab: [{w:"à¸—à¸¸à¸", m:"æ¯"}, {w:"à¸ªà¸¸à¸‚", m:"å¿«æ¨‚"}] },
                    { char: "-à¸¹", rom: "uu", name: "Sara Uu (é•·)", memo: "ä¸‹é¢çš„å¤§èŒèšªã€‚", vocab: [{w:"à¸”à¸¹", m:"çœ‹"}, {w:"à¸‡à¸¹", m:"è›‡"}] },
                    { char: "à¹€-", rom: "e", name: "Sara E", memo: "å¯«åœ¨å·¦é‚Šçš„é«˜æŸ±å­ã€‚", combos: [{v:"à¸—", ex:"à¹€ + à¸—", res:"à¹€à¸—", desc:"Thee"}, {v:"à¸", ex:"à¹€ + à¸", res:"à¹€à¸", desc:"Ke"}], vocab: [{w:"à¹€à¸—", m:"å€’"}, {w:"à¹€à¸", m:"é ‘çš®"}] },
                    { char: "à¹-", rom: "ae", name: "Sara Ae", memo: "å…©æ ¹æŸ±å­ã€‚", vocab: [{w:"à¹à¸¡à¹ˆ", m:"åª½åª½"}, {w:"à¹à¸à¸‡", m:"è²´"}] },
                    { char: "à¹‚-", rom: "o", name: "Sara O", memo: "æ¯”èª°éƒ½é«˜ï¼Œé ­å‘å…§å½ã€‚", vocab: [{w:"à¹‚à¸•", m:"å¤§"}, {w:"à¹‚à¸¡à¹‚à¸«", m:"ç”Ÿæ°£"}] },
                    { char: "à¹„-", rom: "ai", name: "Sara Ai", memo: "ç™¼éŸ³åƒ'æ„›'ï¼Œå¯«åœ¨å·¦é‚Šã€‚", vocab: [{w:"à¹„à¸›", m:"å»"}, {w:"à¹„à¸¡à¹ˆ", m:"ä¸"}] }
                ]
            },
            kr: {
                cons: [
                    { char: "ã„±", rom: "g/k", name: "Gi-yeok", type: "base", memo: "æ‰‹æ§å½¢ç‹€ã€‚èˆŒæ ¹å µä½å–‰åš¨ã€‚", vocab: [{w:"ê°€ë°©", m:"åŒ…åŒ…"}, {w:"ê³ ê¸°", m:"è‚‰"}] },
                    { char: "ã„´", rom: "n", name: "Ni-eun", type: "base", memo: "èˆŒå°–é ‚ä¸Š Nã€‚", vocab: [{w:"ë‚˜", m:"æˆ‘"}, {w:"ëˆˆ", m:"çœ¼ç›"}] },
                    { char: "ã„·", rom: "d/t", name: "Di-geut", type: "base", memo: "èˆŒé ­è¢«å°ä½ Dã€‚", vocab: [{w:"ë‹¤", m:"å…¨éƒ¨"}, {w:"ë„", m:"å³¶"}] },
                    { char: "ã„¹", rom: "r/l", name: "Ri-eul", type: "base", memo: "è›‡è¡Œçš„ R/Lã€‚", vocab: [{w:"ë¼ë””ì˜¤", m:"æ”¶éŸ³æ©Ÿ"}, {w:"ìš°ë¦¬", m:"æˆ‘å€‘"}] },
                    { char: "ã…", rom: "m", name: "Mi-eum", type: "base", memo: "å˜´å·´é–‰åˆ Mã€‚", combos: [{v:"ã…—", ex:"ã… + ã…—", res:"ëª¨", desc:"Mo"}], vocab: [{w:"ëª¨ì", m:"å¸½å­"}, {w:"ëª¸", m:"èº«é«”"}] },
                    { char: "ã…‚", rom: "b/p", name: "Bi-eup", type: "base", memo: "æ°´æ¡¶è£æ°´ Bã€‚", vocab: [{w:"ë°”ë‚˜ë‚˜", m:"é¦™è•‰"}, {w:"ë¹„", m:"é›¨"}] },
                    { char: "ã……", rom: "s", name: "Si-ot", type: "base", memo: "äººç«™ç«‹/ç‰™é½’ Sã€‚", vocab: [{w:"ì‚¬ê³¼", m:"è˜‹æœ"}, {w:"ì†Œ", m:"ç‰›"}] },
                    { char: "ã…‡", rom: "ng/-", name: "I-eung", type: "base", memo: "ç©ºå¿ƒåœ“/å–‰åš¨ã€‚å­—é¦–ä¸ç™¼éŸ³ã€‚", vocab: [{w:"ìš°ìœ ", m:"ç‰›å¥¶"}, {w:"ì•„ì´", m:"å°å­©"}] },
                    { char: "ã…ˆ", rom: "j", name: "Ji-eut", type: "base", memo: "ã……åŠ ä¸€æ©« Jã€‚", vocab: [{w:"ì§€ë„", m:"åœ°åœ–"}, {w:"ì", m:"å°º"}] },
                    // æ¿€éŸ³
                    { char: "ã…Š", rom: "ch", name: "Chi-eut", type: "asp", memo: "ã…ˆåŠ ä¸€æ©«ï¼Œå™´æ°£ Chã€‚", vocab: [{w:"ì°¨", m:"è»Š"}, {w:"ì¹˜ë§ˆ", m:"è£™å­"}] },
                    { char: "ã…‹", rom: "k", name: "Khi-euk", type: "asp", memo: "ã„±å™´æ°£ Kã€‚", vocab: [{w:"ì½”", m:"é¼»å­"}, {w:"í‚¤", m:"èº«é«˜"}] },
                    { char: "ã…Œ", rom: "t", name: "Thi-eut", type: "asp", memo: "ã„·å™´æ°£ Tã€‚", vocab: [{w:"íƒ€ë‹¤", m:"æ­ä¹˜"}, {w:"í† ë§ˆí† ", m:"ç•ªèŒ„"}] },
                    { char: "ã…", rom: "p", name: "Phi-eup", type: "asp", memo: "ã…å™´æ°£ Pã€‚", vocab: [{w:"íŒŒ", m:"è”¥"}, {w:"í¬ë„", m:"è‘¡è„"}] },
                    { char: "ã…", rom: "h", name: "Hi-eut", type: "asp", memo: "æˆ´å¸½å­çš„äºº Hã€‚", vocab: [{w:"í•˜ë‚˜", m:"ä¸€"}, {w:"íœ´ì§€", m:"è¡›ç”Ÿç´™"}] },
                    // ç·ŠéŸ³
                    { char: "ã„²", rom: "kk", name: "Sang-Giyeok", type: "tense", memo: "ç”¨åŠ› Gã€‚", vocab: [{w:"ê¼¬ë¦¬", m:"å°¾å·´"}, {w:"ê¿€", m:"èœ‚èœœ"}] },
                    { char: "ã„¸", rom: "tt", name: "Sang-Digeut", type: "tense", memo: "ç”¨åŠ› Dã€‚", vocab: [{w:"ë”¸ê¸°", m:"è‰è“"}, {w:"ë–¡", m:"å¹´ç³•"}] },
                    { char: "ã…ƒ", rom: "pp", name: "Sang-Bieup", type: "tense", memo: "ç”¨åŠ› Bã€‚", vocab: [{w:"ë¹µ", m:"éºµåŒ…"}, {w:"ë½€ë½€", m:"è¦ªè¦ª"}] },
                    { char: "ã…†", rom: "ss", name: "Sang-Siot", type: "tense", memo: "ç”¨åŠ› Sã€‚", vocab: [{w:"ì“°ë‹¤", m:"å¯«"}, {w:"ì‹¸ë‹¤", m:"ä¾¿å®œ"}] },
                    { char: "ã…‰", rom: "jj", name: "Sang-Jieut", type: "tense", memo: "ç”¨åŠ› Jã€‚", vocab: [{w:"ì§œë‹¤", m:"é¹¹"}, {w:"ì°Œê°œ", m:"æ¹¯é‹"}] }
                ],
                vowels: [
                    { char: "ã…", rom: "a", name: "A", memo: "å‘å³(é™½)ï¼Œå¼µå¤§å˜´ã€‚", combos: [{v:"ã……", ex:"ã…… + ã…", res:"ì‚¬", desc:"Sa"}], vocab: [{w:"ì°¨", m:"è»Š"}, {w:"ë‚˜", m:"æˆ‘"}] },
                    { char: "ã…‘", rom: "ya", name: "Ya", memo: "å¤šä¸€æ©«åŠ YéŸ³ã€‚", vocab: [{w:"ì•¼êµ¬", m:"æ£’çƒ"}, {w:"ì•½", m:"è—¥"}] },
                    { char: "ã…“", rom: "eo", name: "Eo", memo: "å‘å·¦(é™°)ï¼Œç™¼'å–”'ã€‚", vocab: [{w:"ì–´ë¨¸ë‹ˆ", m:"æ¯è¦ª"}, {w:"ì„œìš¸", m:"é¦–çˆ¾"}] },
                    { char: "ã…•", rom: "yeo", name: "Yeo", memo: "å¤šä¸€æ©«åŠ YéŸ³ã€‚", vocab: [{w:"ì—¬ì", m:"å¥³äºº"}, {w:"ì—¬ê¸°", m:"é€™è£¡"}] },
                    { char: "ã…—", rom: "o", name: "O", memo: "å‘ä¸Š(é™½)ï¼Œå˜Ÿå˜´åœ“ã€‚", combos: [{v:"ã……", ex:"ã…… + ã…—", res:"ì†Œ", desc:"So"}], vocab: [{w:"ì˜¤ë¦¬", m:"é´¨å­"}, {w:"ì˜¤ëŠ˜", m:"ä»Šå¤©"}] },
                    { char: "ã…›", rom: "yo", name: "Yo", memo: "å¤šä¸€æ©«åŠ YéŸ³ã€‚", vocab: [{w:"ìš”ë¦¬", m:"æ–™ç†"}, {w:"êµì‹¤", m:"æ•™å®¤"}] },
                    { char: "ã…œ", rom: "u", name: "U", memo: "å‘ä¸‹(é™°)ï¼Œå˜Ÿå˜´æ‰ã€‚", vocab: [{w:"êµ¬ë‘", m:"çš®é‹"}, {w:"ìš°ë¦¬", m:"æˆ‘å€‘"}] },
                    { char: "ã… ", rom: "yu", name: "Yu", memo: "å¤šä¸€æ©«åŠ YéŸ³ã€‚", vocab: [{w:"ìš°ìœ ", m:"ç‰›å¥¶"}, {w:"ìœ ë¦¬", m:"ç»ç’ƒ"}] },
                    { char: "ã…¡", rom: "eu", name: "Eu", memo: "åœ°å¹³ç·šï¼Œå’¬ç‰™ç™¼'é¡'ã€‚", vocab: [{w:"ê·¸", m:"é‚£"}, {w:"í¬ë‹¤", m:"å¤§"}] },
                    { char: "ã…£", rom: "i", name: "I", memo: "äººç«™ç«‹ï¼Œç™¼'ä¸€'ã€‚", vocab: [{w:"ì´", m:"ç‰™é½’/äºŒ"}, {w:"ë¹„", m:"é›¨"}] },
                    { char: "ã…", rom: "ae", name: "Ae", memo: "ã…+ã…£ã€‚", vocab: [{w:"ê°œ", m:"ç‹—"}, {w:"í•´", m:"å¤ªé™½"}] },
                    { char: "ã…”", rom: "e", name: "E", memo: "ã…“+ã…£ã€‚", vocab: [{w:"ë„¤", m:"æ˜¯"}, {w:"ì…‹", m:"ä¸‰"}] },
                    { char: "ã…˜", rom: "wa", name: "Wa", memo: "ã…—+ã…ã€‚", vocab: [{w:"ê³¼ì", m:"é¤…ä¹¾"}, {w:"ì™€", m:"ä¾†"}] },
                    { char: "ã…", rom: "wo", name: "Wo", memo: "ã…œ+ã…“ã€‚", vocab: [{w:"ì›", m:"éŸ“å…ƒ"}, {w:"ë­", m:"ä»€éº¼"}] }
                ]
            }
        };

        let currentLang = 'th';

        function render() {
            renderSection('th-mid-grid', DB.th.mid, 'th-mid');
            renderSection('th-high-grid', DB.th.high, 'th-high');
            renderSection('th-low-grid', DB.th.low, 'th-low');
            renderSection('th-vowel-grid', DB.th.vowels, 'th-vowel');

            renderSection('kr-cons-grid', DB.kr.cons, 'kr');
            renderSection('kr-vowel-grid', DB.kr.vowels, 'kr-vowel');
        }

        function renderSection(id, data, cssClassBase) {
            const grid = document.getElementById(id);
            grid.innerHTML = '';
            data.forEach(item => {
                let finalClass = cssClassBase === 'kr' ? 'kr-' + item.type : cssClassBase;
                const el = document.createElement('div');
                el.className = `card ${finalClass}`;
                el.innerHTML = `<div class="card-char">${item.char}</div><div class="card-rom">${item.rom}</div>`;
                el.onclick = () => openModal(item, finalClass);
                grid.appendChild(el);
            });
        }

        function openModal(item, cssClass) {
            const modal = document.getElementById('modal');
            const charElem = document.getElementById('m-char');
            charElem.innerText = item.char;
            charElem.className = `m-big-char ${cssClass}`; 
            document.getElementById('m-name').innerText = item.name;
            document.getElementById('m-type').innerText = item.type ? `åˆ†é¡: ${item.type}` : 'åŸºæœ¬å­—æ¯';
            document.getElementById('m-memo').innerText = item.memo;

            const comboList = document.getElementById('m-combo-list');
            comboList.innerHTML = '';
            const comboLabel = document.getElementById('label-combo');
            let displayCombos = item.combos || [];
            
            // éŸ“èªè‡ªå‹•æ‹¼éŸ³ç¯„ä¾‹
            if (displayCombos.length === 0 && currentLang === 'kr' && item.type) {
                 displayCombos.push({ex: `${item.char} + ã…`, res: item.char + "ã…", desc: "èˆ‡ A çµ„åˆ"});
            }

            if (displayCombos.length > 0) {
                comboLabel.style.display = 'block';
                displayCombos.forEach(c => {
                    const row = document.createElement('div');
                    row.className = 'combo-row';
                    row.innerHTML = `<span>${c.ex}</span><span class="combo-part">â®•</span><span class="combo-result">${c.res}</span><span class="combo-desc">${c.desc || ''}</span>`;
                    comboList.appendChild(row);
                });
            } else {
                comboLabel.style.display = 'none';
            }

            const vocabList = document.getElementById('m-vocab-list');
            vocabList.innerHTML = '';
            if (item.vocab) {
                item.vocab.forEach(v => {
                    const btn = document.createElement('div');
                    btn.className = 'vocab-item';
                    btn.onclick = () => playAudio(v.w);
                    btn.innerHTML = `<div class="v-text-group"><span class="v-word">${v.w}</span><span class="v-mean">${v.m}</span></div><span class="v-icon">ğŸ”Š</span>`;
                    vocabList.appendChild(btn);
                });
            }
            modal.style.display = 'flex';
        }

        function closeModal(e) {
            document.getElementById('modal').style.display = 'none';
        }

        function setLang(lang) {
            currentLang = lang;
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');
            document.querySelectorAll('.container').forEach(c => c.classList.remove('active'));
            document.getElementById(`${lang}-area`).classList.add('active');
        }

        function playAudio(text) {
            if ('speechSynthesis' in window) {
                window.speechSynthesis.cancel();
                const ut = new SpeechSynthesisUtterance(text);
                ut.lang = currentLang === 'th' ? 'th-TH' : 'ko-KR';
                ut.rate = 0.8;
                window.speechSynthesis.speak(ut);
            }
        }

        // Init
        render();
    </script>
</body>
</html>
